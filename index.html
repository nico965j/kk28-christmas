<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Power BI Dashboard</title>
    <!-- If you're using jQuery, make sure to include it -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include the Power BI JavaScript API -->
    <script src="https://cdn.powerbi.com/libs/powerbi-client/2.18.5/powerbi.min.js"></script>
</head>
<body>
    <h1>Kitchen 28 - Appleskive Challenge</h1>
    <div id="embedContainer" style="height: 600px; width: 100%;"></div>
    <script>
        // Ensure this is defined globally if it's needed in your config
        let models = window['powerbi-client'].models;

        async function embedPowerBIReport() {
            // Replace these placeholders with your actual values
            let accessToken = 'EMBED_ACCESS_TOKEN'; // You must put your actual access token here
            let embedUrl = 'EMBED_URL'; // You must put your actual embed URL here
            let embedReportId = 'REPORT_ID'; // You must put your actual report ID here
            let tokenType = models.TokenType.Embed; // Or models.TokenType.Aad depending on your authentication method

            let config = {
                type: 'report',
                tokenType: tokenType,
                accessToken: accessToken,
                embedUrl: embedUrl,
                id: embedReportId,
                settings: {
                    panes: {
                        filters: {
                            visible: true
                        },
                        pageNavigation: {
                            visible: true
                        }
                    },
                    bars: {
                        statusBar: {
                            visible: true
                        }
                    }
                }
            };

            let embedContainer = document.getElementById('embedContainer');
            let report = powerbi.embed(embedContainer, config);

            try {
                await report.render();
                console.log('Report render succeeded');
            } catch (error) {
                console.error('Error during report rendering', error);
            }
        }

        embedPowerBIReport();
    </script>
</body>
</html>


